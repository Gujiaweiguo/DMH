DMH 管理后台 - 冒烟验证 (Playwright 实施计划与记录模板)

1) 目标
- 在 http://localhost:3000 使用管理员账户登录后，进入左侧菜单的“安全管理”，验证三大板块是否出现并可用，且关键入口各项功能的基本行为可触发但不执行破坏性动作。

2) 环境与入口
- 入口：http://localhost:3000
- 登录凭证：用户名 admin，密码 123456
- 需要验证的板块：密码策略、活跃会话、安全事件

3) 测试前置条件
- 测试环境应可访问 DMH 管理后台前端部署，且无阻塞的网络请求错误
- 浏览器可启动，且没有已知的权限/扩展阻塞
- 如遇跨域/证书问题，请记录并标注为环境问题

4) 测试步骤（逐步执行，逐步记录）
- Step 1: 打开登录页并输入凭证
  - 打开: http://localhost:3000
  - 填写用户名: admin
  - 填写密码: 123456
  - 点击登录按钮
  - 证据：截图 (路径示例: /tmp/dmh-smoke-login.png)
- Step 2: 验证登录后进入后台
  - 断言：页面存在仪表盘相关文本/控件，例如“仪表盘”或等效文本
  - 证据：截图 (/tmp/dmh-smoke-dashboard.png)；若页面文本缺失，记下失败原因
- Step 3: 进入安全管理板块
  - 动作：在左侧菜单点击 安全管理
  - 证据：截图 (/tmp/dmh-smoke-security.png)
- Step 4: 验证三个板块文本存在与渲染
  - 断言：文本应包含并可见以下三项：密码策略、活跃会话、安全事件
  - 证据：截图 (/tmp/dmh-smoke-panels.png)
- Step 5: 点击保存策略按钮
  - 动作：点击文本为“保存策略”的按钮
  - 证据：截图 (/tmp/dmh-smoke-save.png)，并记录页面反馈文本（如“保存成功”/“保存失败”/无反馈）
- Step 6: 触发撤销会话/强制下线按钮，确保弹出确认弹窗并取消
  - 动作：点击撤销会话/强制下线按钮
  - 证据：截图 (/tmp/dmh-smoke-revoke.png)
  - 结果：当弹窗出现时，进行取消操作；若未出现，则记录原因
- Step 7: 标记已处理（如存在待处理事件）
  - 动作：若页面中存在“标记已处理”按钮，点击并记录反馈
  - 证据：截图 (/tmp/dmh-smoke-mark.png)
  - 结果：若不存在待处理事件，记录“无待处理事件”
- Step 8: 记录与汇总
  - 汇总输出应包含每一步的结果 PASS/FAIL、简要备注、证据截图路径
  - 如页面加载失败，记录 HTTP 状态、控制台错误及可见提示信息

5) 证据与报告格式
- 截图路径示例：/tmp/dmh-smoke-<step-name>.png
- 结构化结果示例（JSON）：
  {
    "summary": [
      {"step": "1. 登录成功并进入后台", "result": "PASS", "note": "", "evidence": "/tmp/dmh-smoke-login.png"},
      {"step": "2. 安全管理板块进入并渲染", "result": "PASS", "note": "文本可见", "evidence": "/tmp/dmh-smoke-security.png"},
      {"step": "3. 保存策略按钮反馈", "result": "PASS", "note": "无变更也有反馈", "evidence": "/tmp/dmh-smoke-save.png"},
      {"step": "4. 撤销会话弹窗取消", "result": "PASS", "note": "对话框出现，已取消", "evidence": "/tmp/dmh-smoke-revoke.png"},
      {"step": "5. 标记已处理", "result": "PASS", "note": "如存在待处理事件则执行", "evidence": "/tmp/dmh-smoke-mark.png"}
    ]
  }

6) 选择器与实现提示
- 具体页面结构可能因版本而异，请在 Playwright/页面自动化脚本中使用稳定的文本定位或数据-testid/aria-label 等属性提升鲁棒性。
- 如文本语言为简体中文，请以文本内容为定位点；如页面国际化，请提供相应文本或使用更稳健的 CSS 选择器。

7) 注意事项
- 不进行任何破坏性操作（如强制下线真实账户等）除非明确被允许并且是测试用例的一部分
- 如遇页面加载失败，请明确记录：HTTP 状态码、控制台错误、网络请求失败、UI 提示信息等
- 该文档仅用于冒烟验证的记录模板，实际执行应在受控测试环境中完成，并将结果回传以供分析

8) 快速即用的 Playwright 脚本模板（仅供参考，需您在本地/CI 运行）
- 文件名示例：scripts/admin_smoke_playwright_template.js
- 脚本要点：打开页面、登录、进入安全管理、断言板块、触发按键并捕捉对话框等；遇到页面差异时需调整选择器

9) 执行与产出
- 在本地或 CI 执行该计划，得到如上所述的结构化结果 JSON 与截图证据
- 如您愿意，我可以在能访问的环境中为您生成一个实际可执行的 Playwright 脚本并输出最终报告格式

--- 结束 ---
