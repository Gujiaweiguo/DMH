# Quality Gate

> 来源：`test-plan.md` 第 3.4 章与第 6 章

## 发布门禁

| 指标 | 阈值 | 说明 |
|---|---|---|
| P0 用例通过率 | **100%** | RBAC / 活动管理 / 订单支付全部通过 |
| P1 用例通过率 | **>= 95%** | 反馈系统 / 规格治理允许 5% 内非阻塞失败 |
| Blocker 缺陷 | **0** | 核心链路不可用、数据错乱、越权泄露 |
| Critical 缺陷 | **0** | 主要功能失败、事务不一致、权限控制失效 |

## 判定表

| 指标 | 阈值 | 当前值 | 是否通过 |
|---|---|---|---|
| P0 通过率 | 100% | **100%** | ✅ 通过 |
| P1 通过率 | >= 95% | **100%** | ✅ 通过 |
| Blocker 缺陷 | 0 | **0** | ✅ 通过 |
| Critical 缺陷 | 0 | **0** | ✅ 通过 |
| Major 缺陷 | 记录但不阻塞 | **0** | ✅ 通过 |

## 缺陷分级定义

| 级别 | 定义 | 示例 |
|---|---|---|
| Blocker | 核心链路不可用 | 登录失败、订单创建失败、越权泄露 |
| Critical | 主要功能失败 | 权限控制失效、事务不一致、数据丢失 |
| Major | 功能可用但结果错误 | 筛选条件不生效、导出格式错误 |
| Minor | 低风险体验问题 | 提示文案错误、UI 对齐问题 |

## 失败处理

1. 记录失败项与影响范围（填入 `TEST_RESULT_TEMPLATE.md`）。
2. 修复后按 `PREMERGE_MIN_SUITE.md` 重跑。
3. 复验通过后再进入发布评审。
4. 若需带风险发布，必须填写 `RISK_WAIVER_TEMPLATE.md` 并获得审批。
