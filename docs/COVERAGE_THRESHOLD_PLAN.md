# DMH è¦†ç›–ç‡é˜ˆå€¼åˆ†é˜¶æ®µç­–ç•¥

## ç›®æ ‡

é€šè¿‡åˆ†é˜¶æ®µæå‡è¦†ç›–ç‡é˜ˆå€¼ï¼Œé€æ­¥è¾¾åˆ°æ•´ä½“ 70% çš„è¦†ç›–ç‡ç›®æ ‡ã€‚

## é˜¶æ®µè§„åˆ’

| é˜¶æ®µ | æ—¶é—´ | åç«¯é˜ˆå€¼ | ç®¡ç†åå°é˜ˆå€¼ | H5 é˜ˆå€¼ | å¤‡æ³¨ |
|------|------|---------|-------------|---------|------|
| Week 1 | åŸºå»ºå‘¨ | 50% | 40% | 40% | åŸºçº¿è®¾å®š |
| Week 2 | P0 è¡¥é½ | 60% | 50% | 50% | auth/statistics/brand æ‰©å±• |
| Week 3 | P1 æ‰«å°¾ | 68% | 60% | 60% | middleware/admin/withdrawal |
| Week 4 | å‰ç«¯å†²åˆº | 70% | 70% | 70% | å‰ç«¯å•æµ‹æ‰©é¢ + E2E |

## é˜ˆå€¼é…ç½®æ–¹å¼

### ç¯å¢ƒå˜é‡é…ç½®

åœ¨ CI/PR ä¸­é€šè¿‡ç¯å¢ƒå˜é‡è®¾ç½®é˜ˆå€¼ï¼š

```bash
export COVERAGE_THRESHOLD_BACKEND=70
export COVERAGE_THRESHOLD_ADMIN=70
export COVERAGE_THRESHOLD_H5=70
./scripts/test-all.sh
```

### é˜¶æ®µé…ç½®æ–‡ä»¶

å½“å‰é˜¶æ®µé€šè¿‡ `scripts/COVERAGE_PHASE` æ–‡ä»¶æ§åˆ¶ï¼š

```bash
# Week 1: åŸºçº¿
# Week 2: P0
# Week 3: P1
# Week 4: å†²åˆº
PHASE=Week1
```

## å½“å‰çŠ¶æ€ï¼ˆWeek 3 ç»“æŸï¼‰

| æ¨¡å— | å½“å‰è¦†ç›–ç‡ | Week 3 å‰åŸºçº¿ | Week 3 ç›®æ ‡ | å·®è· | çŠ¶æ€ |
|------|-----------|-------------|------------|------|------|
| åç«¯ï¼ˆæ•´ä½“ï¼‰ | ~76.7% | ~74.9% | 68-72% | +4.7% | âœ… è¶…é¢å®Œæˆ |
| ç®¡ç†åå° | ~4.4% | ~4.4% | 60% | -55.6% | ğŸ”´ ä¸¥é‡ä¸è¶³ |
| H5 | ~1.1% | ~1.1% | 60% | -58.9% | ğŸ”´ ä¸¥é‡ä¸è¶³ |

## å…³é”®æŒ‡æ ‡

- **åç«¯æ ¸å¿ƒæ¨¡å—ä¼˜å…ˆçº§**ï¼šauth > statistics > brand > order > distributor
- **å‰ç«¯å…³é”®è·¯å¾„**ï¼šç™»å½• > æ´»åŠ¨ç®¡ç† > è®¢å•å¤„ç† > åé¦ˆæµç¨‹
- **E2E smoke è¦†ç›–**ï¼šç™»å½•ã€æ ¸å¿ƒå¯¼èˆªã€å…³é”®æäº¤æµç¨‹å¿…é¡»è¦†ç›–

## éªŒè¯æ–¹å¼

è¿è¡Œç»Ÿä¸€æµ‹è¯•è„šæœ¬ï¼š
```bash
./scripts/test-all.sh --skip-e2e
```

æŸ¥çœ‹è¯¦ç»†è¦†ç›–ç‡ï¼š
```bash
# åç«¯
cd backend && go tool cover -html=coverage.out

# ç®¡ç†åå°
cd frontend-admin && npm run test:cov && open coverage/index.html

# H5
cd frontend-h5 && npm run test:cov && open coverage/index.html
```
